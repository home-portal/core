{"version":3,"sources":["HomePage.vue","index.js"],"names":["Vue","HomePortal","dependencies","vue","registerPage","name","module","mountDiv","el","render","h","Page","$mount","$el"],"mappings":";AA4EA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAHA,IAAA,EAAA,WAAA,aAAA,OACA,EAAA,WAAA,aAAA,KAEA,EAAA,CACA,SAAA,CACA,MAAA,WACA,OAAA,WAAA,WAAA,OAAA,SAAA,GAAA,QAAA,EAAA,sBAIA,KAAA,WACA,MAAA,CACA,SAAA,GACA,MAAA,KACA,KAAA,KACA,KAAA,OAIA,QAAA,CACA,OAAA,WACA,KAAA,KAAA,IAAA,OAAA,MACA,KAAA,KAAA,IAAA,OAAA,OAGA,YAAA,WACA,IAAA,EAAA,KAAA,SAAA,QACA,GAAA,GAAA,EAAA,OAAA,EAAA,CACA,QAAA,IAAA,sBAEA,IADA,IAAA,EAAA,KAAA,IAAA,EAAA,OAAA,GACA,EAAA,EAAA,EAAA,EAAA,IAAA,CACA,IAAA,EAAA,WAAA,UAAA,EAAA,IACA,GAAA,EAAA,CACA,QAAA,IAAA,oBAAA,GACA,IACA,IAAA,EAAA,KAAA,IAAA,cAAA,YAAA,OAAA,EAAA,IACA,GAAA,EAAA,WAAA,EAAA,UAAA,CACA,IAAA,EAAA,SAAA,cAAA,OACA,EAAA,YAAA,GACA,EAAA,QAAA,EAAA,SAAA,QACA,EAAA,WAAA,EAAA,OACA,EAAA,QAAA,EAAA,MAAA,GAEA,QAAA,KACA,8CAAA,OAAA,EAAA,KACA,KAAA,GAGA,MAAA,GACA,QAAA,MAAA,0BAAA,EAAA,SAQA,QAAA,WAAA,IAAA,EAAA,KACA,KAAA,SAAA,WAAA,kBAAA,QACA,QAAA,IAAA,kBAAA,KAAA,UAEA,KAAA,SACA,KAAA,MAAA,YAAA,WAAA,OAAA,EAAA,UAAA,MAGA,QAAA,WACA,KAAA,eAGA,OAAA,CAAA,sBACA,WACA,EAAA,OACA,KAAA,IAAA,iBAAA,oBACA,CAAA,GAAA,IAAA,QAAA,GACA,CACA,EAAA,EACA,QAAA,EACA,MAAA,GACA,SAAA,EACA,WAAA,UACA,KAAA,sBACA,QAAA,MAIA,EAAA,OACA,KAAA,IAAA,cAAA,WACA,CAAA,EAAA,KACA,CACA,EAAA,EACA,MAAA,GACA,SAAA,IACA,WAAA,UACA,KAAA,wBAGA,EAAA,OACA,KAAA,IAAA,iBAAA,0BACA,CAAA,QAAA,EAAA,MAAA,IACA,CACA,QAAA,EACA,MAAA,EACA,MAAA,EACA,SAAA,EACA,KAAA,sBACA,QAAA,KAIA,EAAA,OACA,KAAA,IAAA,iBAAA,oBACA,CAAA,GAAA,KACA,CACA,EAAA,EACA,MAAA,EACA,SAAA,EACA,WAAA,UACA,KAAA,sBACA,QAAA,MAjDA,wBAsDA,WACA,EAAA,GAAA,KAAA,IAAA,iBAAA,oBAAA,CACA,WAAA,SACA,SAAA,KAEA,EAAA,GAAA,KAAA,IAAA,cAAA,WAAA,CAAA,WAAA,SAAA,SAAA,KACA,EAAA,GAAA,KAAA,IAAA,iBAAA,oBAAA,CACA,WAAA,SACA,SAAA,OAKA,cAAA,WACA,KAAA,OAAA,cAAA,KAAA,SAtIA,QAAA,QAAA;;;ACxEA,aAFA,IAAA,EAAA,EAAA,QAAA,mBAEA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAJA,IAAMA,EAAMC,WAAWC,aAAaC,IAIpCF,WAAWG,aAAa,CACvBC,KAAM,OACNC,OAAQ,OACRC,SAAU,SAAAC,GAAM,OAAA,IAAIR,EAAI,CAAES,OAAQ,SAAAC,GAAKA,OAAAA,EAAEC,EAAD,YAAUC,OAAOJ,GAAIK","file":"index.js","sourceRoot":"..\\..\\..\\..\\modules\\home\\frontend","sourcesContent":["<template>\n\t<div class=\"page\">\n\t\t<div class=\"overlay\"></div>\n\t\t<div class=\"wrapper\">\n\t\t\t<div class=\"page-header\">\n\t\t\t\t<div class=\"title\">\n\t\t\t\t\t<span>Home Portal</span>\n\t\t\t\t</div>\n\t\t\t\t<!-- <div class=\"action-bar absolute top-0 right-0 flex\">\n\t\t\t\t\t<div class=\"btn btn-today\">\n\t\t\t\t\t\t<i class=\"fa fa-play\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"btn btn-settings\">\n\t\t\t\t\t\t<i class=\"fa fa-cog\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</div> -->\n\t\t\t</div>\n\n\t\t\t<div class=\"page-content flex-1 flex flex-col overflow-hidden\">\n\t\t\t\t<div class=\"widgets layout-2x2\">\n\t\t\t\t\t<div class=\"widget w1\"></div>\n\n\t\t\t\t\t<div class=\"widget w2\"></div>\n\n\t\t\t\t\t<div class=\"widget w3\"></div>\n\n\t\t\t\t\t<div class=\"widget w4\"></div>\n\n\t\t\t\t\t<div class=\"widget w5\"></div>\n\n\t\t\t\t\t<div class=\"widget w6\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"footer panel mt-2 flex flex-col justify-center invisible\">\n\t\t\t\t<div class=\"toolbar flex justify-around py-3\">\n\t\t\t\t\t<div v-for=\"page of pages\" :key=\"page.name\" class=\"item flex-1 text-4xl text-center cursor-pointer\" @click=\"broker.call('$router.goTo', { page: page.name })\">\n\t\t\t\t\t\t<i class=\"text-white rounded-full\" :class=\"page.icon || 'fa fa-question'\"></i>\n\t\t\t\t\t\t<div class=\"hidden mt-1 text-base text-center font-normal text-gray-100\">{{ page.caption }}</div>\n\t\t\t\t\t</div>\n<!--\n\t\t\t\t\t<div class=\"item\" @click=\"broker.call('$router.goTo', { page: 'weather' })\">\n\t\t\t\t\t\t<i class=\"fa fa-cloud-sun\"></i>\n\t\t\t\t\t\t<div class=\"title\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t<i class=\"fa fa-calendar-alt\"></i>\n\t\t\t\t\t\t<div class=\"title\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"item\" @click=\"broker.call('$router.goTo', { page: 'traffic' })\">\n\t\t\t\t\t\t<i class=\"fa fa-globe-americas\"></i>\n\t\t\t\t\t\t<div class=\"title\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t<i class=\"fa fa-tasks\"></i>\n\t\t\t\t\t\t<div class=\"title\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t<i class=\"fa fa-video\"></i>\n\t\t\t\t\t\t<div class=\"title\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t<i class=\"fa fa-newspaper\"></i>\n\t\t\t\t\t\t<div class=\"title\"></div>\n\t\t\t\t\t</div> -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n// Get the dependencies from the core, so it won't be bundled into the module.\nconst moment = HomePortal.dependencies.moment;\nconst gsap = HomePortal.dependencies.gsap;\n\nexport default {\n\tcomputed: {\n\t\tpages() {\n\t\t\treturn HomePortal.getPages().filter(page => !!page.showInQuickLaunch);\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tsettings: {}, // mixin\n\t\t\ttimer: null,\n\t\t\tdate: null,\n\t\t\ttime: null\n\t\t};\n\t},\n\n\tmethods: {\n\t\tupdate() {\n\t\t\tthis.time = moment().format(\"LT\");\n\t\t\tthis.date = moment().format(\"LL\");\n\t\t},\n\n\t\tloadWidgets() {\n\t\t\tconst widgets = this.settings.widgets;\n\t\t\tif (widgets && widgets.length > 0) {\n\t\t\t\tconsole.log(\"Loading widgets...\");\n\t\t\t\tconst len = Math.min(widgets.length, 6);\n\t\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\t\tconst widget = HomePortal.getWidget(widgets[i]);\n\t\t\t\t\tif (widget) {\n\t\t\t\t\t\tconsole.log(\"Loading widget...\", widget);\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet container = this.$el.querySelector(`.widget.w${i + 1}`);\n\t\t\t\t\t\t\tif (_.isFunction(widget.mountDiv)) {\n\t\t\t\t\t\t\t\tconst div = document.createElement(\"div\");\n\t\t\t\t\t\t\t\tcontainer.appendChild(div);\n\t\t\t\t\t\t\t\twidget.content = widget.mountDiv(div);\n\t\t\t\t\t\t\t} else if (_.isFunction(widget.mount)) {\n\t\t\t\t\t\t\t\twidget.content = widget.mount(container);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t`No 'mount' or 'mountDiv' method in widget '${widget.name}'`,\n\t\t\t\t\t\t\t\t\twidget\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tconsole.error(\"Unable to render widget\", err, widget);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.settings = HomePortal.getModuleSettings(\"home\");\n\t\tconsole.log(\"Module settings\", this.settings);\n\n\t\tthis.update();\n\t\tthis.timer = setInterval(() => this.update(), 10 * 1000);\n\t},\n\n\tmounted() {\n\t\tthis.loadWidgets();\n\t},\n\n\tevents: {\n\t\t\"page-home.activated\"() {\n\t\t\tgsap.fromTo(\n\t\t\t\tthis.$el.querySelectorAll(\".widgets .widget\"),\n\t\t\t\t{ y: -100, opacity: 0 },\n\t\t\t\t{\n\t\t\t\t\ty: 0,\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tdelay: 0.2,\n\t\t\t\t\tduration: 1,\n\t\t\t\t\tvisibility: \"visible\",\n\t\t\t\t\tease: \"elastic.out(1, 0.5)\",\n\t\t\t\t\tstagger: 0.15\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tgsap.fromTo(\n\t\t\t\tthis.$el.querySelector(\".footer\"),\n\t\t\t\t{ y: 100 },\n\t\t\t\t{\n\t\t\t\t\ty: 0,\n\t\t\t\t\tdelay: 0.5,\n\t\t\t\t\tduration: 1.5,\n\t\t\t\t\tvisibility: \"visible\",\n\t\t\t\t\tease: \"elastic.out(1, 0.5)\"\n\t\t\t\t}\n\t\t\t);\n\t\t\tgsap.fromTo(\n\t\t\t\tthis.$el.querySelectorAll(\".footer .toolbar .item\"),\n\t\t\t\t{ opacity: 0, scale: 0.2 },\n\t\t\t\t{\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tscale: 1,\n\t\t\t\t\tdelay: 1,\n\t\t\t\t\tduration: 1,\n\t\t\t\t\tease: \"elastic.out(1, 0.5)\",\n\t\t\t\t\tstagger: 0.2\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tgsap.fromTo(\n\t\t\t\tthis.$el.querySelectorAll(\".action-bar .btn\"),\n\t\t\t\t{ y: -100 },\n\t\t\t\t{\n\t\t\t\t\ty: 0,\n\t\t\t\t\tdelay: 1,\n\t\t\t\t\tduration: 2,\n\t\t\t\t\tvisibility: \"visible\",\n\t\t\t\t\tease: \"elastic.out(1, 0.5)\",\n\t\t\t\t\tstagger: 0.2\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\t\"page-home.deactivated\"() {\n\t\t\tgsap.to(this.$el.querySelectorAll(\".widgets .widget\"), {\n\t\t\t\tvisibility: \"hidden\",\n\t\t\t\tduration: 0.5\n\t\t\t});\n\t\t\tgsap.to(this.$el.querySelector(\".footer\"), { visibility: \"hidden\", duration: 0.5 });\n\t\t\tgsap.to(this.$el.querySelectorAll(\".action-bar .btn\"), {\n\t\t\t\tvisibility: \"hidden\",\n\t\t\t\tduration: 0.5\n\t\t\t});\n\t\t}\n\t},\n\n\tbeforeDestroy() {\n\t\tif (this.timer) clearInterval(this.timer);\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n\tbackground-image: url(\"./images/background.jpg\");\n}\n\n.action-bar {\n\t> div {\n\t\tmargin: 0 0.75rem;\n\t\tfont-size: 2em;\n\t\tcursor: pointer;\n\t\tcolor: var(--primary);\n\t\tvisibility: hidden;\n\n\t\topacity: 0.3;\n\t\ttransition: opacity 0.2s linear;\n\n\t\t&:hover {\n\t\t\topacity: 0.8;\n\t\t}\n\t}\n}\n\n.footer {\n\t.toolbar {\n\t\t.item {\n\t\t\ti {\n\t\t\t\tborder: 0.15em solid var(--bg1);\n\t\t\t\t//border-radius: 50%;\n\t\t\t\twidth: 2em;\n\t\t\t\theight: 2em;\n\t\t\t\tline-height: 1.7em;\n\n\t\t\t\ttransition: background-color 0.2s linear;\n\t\t\t}\n\n\t\t\t&:hover {\n\t\t\t\ti {\n\t\t\t\t\tbackground-color: var(--bg1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n@for $i from 1 through 10 {\n\t.widget.w#{$i} {\n\t\tgrid-area: w#{$i};\n\t}\n}\n\n.widgets {\n\tdisplay: grid;\n\tgrid-gap: 0em;\n\n\t&.layout-2x2 {\n\t\tgrid-template-columns: 50% 50%;\n\t\tgrid-template-areas:\n\t\t\t\"w1 w2\"\n\t\t\t\"w3 w4\";\n\n\t\t@for $i from 5 through 10 {\n\t\t\t.widget.w#{$i} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t}\n\n\t&.layout-3x2 {\n\t\tgrid-template-columns: auto auto auto;\n\t\tgrid-template-areas:\n\t\t\t\"w1 w2 w3\"\n\t\t\t\"w4 w5 w6\";\n\n\t\t@for $i from 7 through 10 {\n\t\t\t.widget.w#{$i} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t}\n\n\t.widget {\n\t\tpadding: 0.5em;\n\t\tmax-height: 100%;\n\t\toverflow: hidden;\n\t\tvisibility: hidden;\n\t}\n}\n\n@media (orientation: portrait) {\n\t.widgets {\n\t\tgrid-gap: 0em;\n\n\t\t&.layout-2x2 {\n\t\t\tgrid-template-columns: auto;\n\t\t\tgrid-template-areas:\n\t\t\t\t\"w1\"\n\t\t\t\t\"w2\"\n\t\t\t\t\"w3\"\n\t\t\t\t\"w4\";\n\t\t}\n\n\t\t&.layout-3x2 {\n\t\t\tgrid-template-columns: auto auto;\n\t\t\tgrid-template-areas:\n\t\t\t\t\"w1 w2\"\n\t\t\t\t\"w3 w4\"\n\t\t\t\t\"w5 w6\";\n\t\t}\n\t}\n}\n</style>\n","const Vue = HomePortal.dependencies.vue;\n\nimport Page from \"./HomePage.vue\";\n\nHomePortal.registerPage({\n\tname: \"home\",\n\tmodule: \"home\",\n\tmountDiv: el => new Vue({ render: h => h(Page) }).$mount(el).$el\n});\n"]}